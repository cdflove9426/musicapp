{"version":3,"sources":["webpack:///./src/common/js/dom.js","webpack:///src/components/slider/slider.vue","webpack:///./src/components/slider/slider.vue?8dd2","webpack:///./src/components/slider/slider.vue","webpack:///src/views/recommend/recommend.vue","webpack:///./src/api/recommend.js","webpack:///./src/api/deslist.js","webpack:///./src/views/recommend/recommend.vue?5278","webpack:///./src/views/recommend/recommend.vue"],"names":["hasClass","el","className","RegExp","test","newClass","split","push","join","name","val","setAttribute","getAttribute","window","SVGElement","rect","getBoundingClientRect","top","left","width","height","offsetTop","offsetLeft","offsetWidth","offsetHeight","slider","data","dots","currentPageIndex","sliderHeight","props","loop","type","Boolean","default","autoPlay","interval","Number","mounted","_this","this","setTimeout","_setSliderWidth","_initDots","_initSlider","_autoPlay","computedHeight","addEventListener","refresh","deactivated","clearInterval","timer","beforeDestroy","methods","$refs","clientHeight","$emit","onResize","children","sliderGroup","totalWidth","sliderWidth","clientWidth","i","length","child","Object","dom","style","Array","_this2","bscroll_esm","scrollX","scroolY","momentum","snap","threshold","snapSpeed","on","_index","getCurrentPage","pageX","_this3","setInterval","goToPage","slider_slider","render","_vm","_h","$createElement","_c","_self","ref","staticClass","_t","_v","_l","item","index","class","active","staticRenderFns","components_slider_slider","__webpack_require__","normalizeComponent","ssrContext","recommend","recommends","songsList","listenScroll","probeType","scrollY","listenNum","created","_getRecommend","_getDesList","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","wrap","_context","prev","next","assign_default","config","g_tk","platform","uin","needNewCode","_","jsonp","sent","stop","_callee2","_context2","songList","chooseItem","location","href","id","changeListenNum","nums","str","ret","forEach","accessnum","toString","substr","indexOf","_scroll","pos","y","pullupSH","$route","fullPath","_sliderHeight","h","adaptBottom","playList","bottom","scroll","_refresh","watch","components","Slider","Scroll","scroll_scroll","Loading","loading","recommend_recommend","attrs","listen-scroll","probe-type","linkUrl","src","picUrl","_e","refInFor","click","$event","directives","rawName","value","expression","_s","_f","domProps","innerHTML","songListDesc","songListAuthor","recommend_Component","recommend_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/5.6ecd17f6ffd4dc67aac5.js","sourcesContent":["export function hasClass(el, className) {\n  let reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)')\n  return reg.test(el.className)\n}\n\nexport function addClass(el, className) {\n  if (hasClass(el, className)) {\n    return\n  }\n\n  let newClass = el.className.split(' ')\n  newClass.push(className)\n  el.className = newClass.join(' ')\n}\n\nexport function removeClass(el, className) {\n  if (!hasClass(el, className)) {\n    return\n  }\n\n  let reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)', 'g')\n  el.className = el.className.replace(reg, ' ')\n}\n\nexport function attrData(el, name, val) {\n  let prefix = 'data-'\n  if (val) {\n    return el.setAttribute(prefix + name, val)\n  }\n  return el.getAttribute(prefix + name)\n}\n\nexport function getRect(el) {\n  if (el instanceof window.SVGElement) {\n    let rect = el.getBoundingClientRect()\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    }\n  } else {\n    return {\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/dom.js","<template>\n  <div class=\"slider\" ref=\"slider\">\n  \t<div class=\"slider-group\" ref=\"sliderGroup\">\n  \t\t<slot></slot>\n  \t</div>\n  \t<div class=\"dots\">\n  \t\t<span class=\"dot\" v-for=\"(item, index) in dots\"  :class=\"{active: currentPageIndex === index}\"></span>\n  \t</div>\n  </div>\n</template>\n\n<script>\nimport BScroll from 'better-scroll'\nimport {addClass} from '@/common/js/dom'\nexport default {\n\tdata(){\n\t\treturn {\n\t\t\tdots: [],\n\t\t\tcurrentPageIndex: 0,\n\t\t\tsliderHeight: 0\n\t\t}\n\t},\n\tprops: {\n\t\tloop:{//循环\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tautoPlay:{\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tinterval:{\n\t\t\ttype: Number,\n\t\t\tdefault: 3000\n\t\t}\n\t},\n\tmounted(){\n\t\tsetTimeout(() => {  //在dom渲染完成后初始化better-scroll\n\t\t\tthis._setSliderWidth()\n\t\t\tthis._initDots()\n\t\t\tthis._initSlider()\n\t\t\tthis.autoPlay && this._autoPlay()\n\t\t\tthis.computedHeight()\n\t\t}, 20)\n\t\t// 改变窗口大小轮播图自适应\n\t\twindow.addEventListener( 'resize', () => {\n\t\t\tif( !this.slider ) {return} // 如果没有初始化return\n\t\t\tthis._setSliderWidth(true)  //防止复制多余的dom\n\t\t\tthis.slider.refresh()  //调用better-scroll内置refresh方法\n\t\t\tthis.computedHeight()\n\t\t} )\n\t},\n    deactivated() {\n      clearInterval(this.timer)\n    },\n\tbeforeDestroy(){\n\t  clearInterval(this.timer)\n\t},\n\tmethods: {\n\t\tcomputedHeight(){\n\t\t\tthis.sliderHeight = this.$refs.slider.clientHeight\n\t\t\tthis.$emit( 'sliderHeight',  this.sliderHeight)\n\t\t},\n\t\t_setSliderWidth(onResize){  //初始化slider前计算并设置宽度\n\t\t\tthis.children = this.$refs.sliderGroup.children  // 获取子元素\n\t\t\tlet totalWidth = 0  //图片水平排列总宽度\n\t\t\tlet sliderWidth = this.$refs.slider.clientWidth  //父容器宽度\n\n\t\t\tfor( let i = 0; i < this.children.length; i++ ){\n\t\t\t\tlet child = this.children[i]\n\t\t\t\taddClass( child, 'slider-item' )  //添加class\n\t\t\t\tchild.style.width = sliderWidth + 'px'  //图片宽度设置为父容器一样宽度\n\t\t\t\ttotalWidth += sliderWidth  //累加得到总宽度\n\t\t\t}\n\t\t\tif( this.loop && !onResize){ //如果循环，那么会多复制2个图片\n\t\t\t\ttotalWidth += 2 * sliderWidth\n\t\t\t}\n\t\t\tthis.$refs.sliderGroup.style.width = totalWidth + 'px'\n\t\t},\n\t\t_initDots(){  //初始化圆点\n\t\t\tthis.dots = new Array( this.children.length )\n\t\t},\n\t\t_initSlider(){//初始化slider\n\t\t\tthis.slider = new BScroll( this.$refs.slider, {\n\t\t\t\tscrollX: true,\n\t\t\t\tscroolY: false,\n\t\t\t\tmomentum: false, //惯性\n\t\t\t\tsnap: {\n\t\t\t\t\tloop: this.loop,\n\t\t\t\t\tthreshold: 0.3,\n\t\t\t\t\tsnapSpeed: 400\n\t\t\t\t}\n\t\t\t} )\n\t\t\t// 每翻一页都会派发scrollEnd事件，在这里获取currentPageIndex\n\t\t\tthis.slider.on( 'scrollEnd', () => {\n\t\t\t\tlet _index =  this.slider.getCurrentPage().pageX\n\t\t\t\tif( this.loop ){ _index -= 1 }\n\t\t\t\tthis.currentPageIndex = _index\n\t\t\t\t// 每次翻页清除定时器并设置下一个\n\t\t\t\tif( this.autoPlay ){\n\t\t\t\t\tclearInterval(this.timer);\n\t\t\t\t\tthis._autoPlay()\n\t\t\t\t}\n\t\t\t} )\n\t\t},\n\t\t_autoPlay(){\n\t\t\tlet _index = this.currentPageIndex + 1\n\t\t\tif( this.loop ) { _index += 1 }\n\t\t\tthis.timer = setInterval(() => {\n\t\t\t\tthis.slider.goToPage( _index, 0, 400 )\n\t\t\t}, this.interval);\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n@import \"~styles/variable\"\n  .slider\n    min-height: 1px\n    .slider-group\n      position: relative\n      overflow: hidden\n      white-space: nowrap\n      .slider-item\n        float: left\n        box-sizing: border-box\n        overflow: hidden\n        text-align: center\n        a\n          display: block\n          width: 100%\n          overflow: hidden\n          text-decoration: none\n        img\n          display: block\n          width: 100%\n    .dots\n      position: absolute\n      right: 0\n      left: 0\n      bottom: 12px\n      text-align: center\n      font-size: 0\n      .dot\n        display: inline-block\n        margin: 0 4px\n        width: 8px\n        height: 8px\n        border-radius: 50%\n        background: $color-text-l\n        &.active\n          background: $color-text-ll\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/slider/slider.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"slider\",staticClass:\"slider\"},[_c('div',{ref:\"sliderGroup\",staticClass:\"slider-group\"},[_vm._t(\"default\")],2),_vm._v(\" \"),_c('div',{staticClass:\"dots\"},_vm._l((_vm.dots),function(item,index){return _c('span',{staticClass:\"dot\",class:{active: _vm.currentPageIndex === index}})}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-60f4e3ae\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/slider/slider.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-60f4e3ae\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./slider.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./slider.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./slider.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-60f4e3ae\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./slider.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-60f4e3ae\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/slider/slider.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"recommend\" ref=\"recommend\">\n    <!-- <div class=\"fixed-wrapper\" ref=\"fixedWrapper\"  v-show=\"pullupSH\">\n    <i class=\"icon-huo\"></i>\n    <h1 class=\"fixed-title\" ref=\"fixedTitle\">热门歌单</h1>\n   </div> -->\n    <scroll ref=\"scroll\" class=\"recommend-content\" :data=\"songsList\" :listen-scroll=\"listenScroll\" :probe-type=\"probeType\" @scroll=\"_scroll\">\n\n      <div class=\"wrapper\">\n        <!-- <div class=\"loading-wrapper\">\n        <loading v-show=\"pullDownRefresh\" :title=\"loadingTitle\"></loading>\n      </div>  -->\n        <!-- 获取图片数据是异步的，拿到数据前slider组件已经被mounted，不能正确渲染，需要如下判断 -->\n        <div v-if=\"recommends.length\" class=\"slider-wrapper\">\n          <slider @sliderHeight=\"_sliderHeight\">\n            <div v-for=\"item in recommends\">\n              <a :href=\"item.linkUrl\">\n                <img :src=\"item.picUrl\" />\n              </a>\n            </div>\n          </slider>\n        </div>\n\n        <div class=\"recommend-list\">\n          <i class=\"icon-huo\"></i>\n          <h1 class=\"list-title\">热门歌单</h1>\n          <ul class=\"clearfix\">\n            <li v-for=\"item, index in songsList\" class=\"item\" @click=\"chooseItem(item)\" ref=\"listGroup\">\n              <div class=\"icon\">\n                <img class=\"needsclick\" height=\"100%\" v-lazy=\"item.picUrl\">\n                <!-- <span class=\"listenNum\">{{listenNum[index]}}</span> -->\n                <span class=\"listenNum\">{{item.accessnum | changeListenNum}}</span>\n              </div>\n              <div class=\"text\">\n                <h2 class=\"name\" v-html=\"item.songListDesc\"></h2>\n                <p class=\"desc\" v-html=\"item.songListAuthor\"></p>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <div class=\"loading-container\" v-show=\"!songsList.length\">\n        <loading></loading>\n      </div>\n    </scroll>\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nimport getRecommend from '@/api/recommend'\nimport getDesList from '@/api/deslist'\nimport getLyric from '@/api/lyric'\nimport { ERR_OK } from '@/api/config'\nimport Slider from '@/components/slider/slider'\nimport Scroll from '@/components/scroll/scroll'\nimport Loading from '@/components/loading/loading'\n// import {adaptBottomMixin} from '@/common/js/mixins'\n// const NO_DATA = \"暂无数据，稍后再试吧\"\n// const NEW_DATA = \"刷新成功\"\nexport default {\n  // mixins: [adaptBottomMixin],\n  data() {\n    return {\n      recommends: [],\n      songsList: [],\n      // pullDownRefresh: true,\n      // pullDownRefreshThreshold: 90,\n      // pullDownRefreshStop: 40,\n      listenScroll: true,\n      probeType: 3,\n      scrollY: -1,\n      sliderHeight: 0,\n      listenNum: []\n    }\n  },\n  created() {\n\n  },\n  mounted() {\n    this._getRecommend()\n    this._getDesList()\n  },\n  methods: {\n    async _getRecommend() {\n      let res = await getRecommend();\n      this.recommends = res.data.slider;\n    },\n    async _getDesList() {\n      let res = await getDesList();\n      this.songsList = res.data.songList;\n      // this.listenNum = this.changeListenNum(res.data.songList)\n\n    },\n\n\n    chooseItem(item) {\n      window.location.href = `https://y.qq.com/w/taoge.html?ADTAG=newyqq.taoge&id=${item.id}`\n\n      // this.$router.push({\n        // path: `/recommend/${item.id}`\n        // path: `https://y.qq.com/w/taoge.html?ADTAG=myqq&from=myqq&channel=10007100&id=${item.id}`\n\n      // })\n      // this.setRecommend(item)\n    },\n    changeListenNum(nums) {\n      let str, ret = []\n      nums.forEach((item) => {\n        str = (item.accessnum / 10000).toString()\n        str = str.substr(0, str.indexOf('.') + 2)\n        str = str + \"万人听过\"\n        ret.push(str)\n      })\n      return ret\n    },\n\n    _scroll(pos) {\n      this.scrollY = pos.y\n    },\n    pullupSH() {\n      // if( !this.sliderHeight ) { return }  //修复首页滚动时fixedTitle bug\n      if (this.scrollY <= - this.sliderHeight && this.$route.fullPath === '/recommend') {\n        return true\n      } else {\n        return false\n      }\n    },\n    _sliderHeight(h) {\n      this.sliderHeight = h\n    },\n    // 重写mixins方法\n    adaptBottom(playList) {\n      const bottom = this.playList.length > 0 ? '40px' : ''\n      this.$refs.recommend.style.bottom = bottom\n      this.$refs.scroll._refresh()\n    },\n  },\n  watch: {\n    // scrollY(val, oldVal) {\n    //   if (val > 80) {\n    //     this.loadingTitle = \"释放刷新\"\n    //   } else {\n    //     this.loadingTitle = \"下拉刷新\"\n    //   }\n    // }\n  },\n  components: {\n    Slider,\n    Scroll,\n    Loading\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n@import '~styles/variable';\n@import '~styles/mixin';\n\n.recommend {\n  position: fixed;\n  width: 100%;\n  top: 88px;\n  bottom: 0;\n\n  .fixed-wrapper {\n    position: fixed;\n    top: 86px;\n    left: 0;\n    width: 100%;\n    padding-left: 20px;\n    height: 60px;\n    line-height: 60px;\n    background: $color-background;\n    z-index: 999;\n    text-align: center;\n    display: none;\n    transition: all 2s;\n\n    .icon-huo {\n      float: left;\n      color: red;\n      font-size: $font-size-large;\n    }\n\n    .fixed-title {\n      font-size: $font-size-large;\n      color: $color-text-l;\n      margin-left: 2px;\n      float: left;\n    }\n  }\n\n  .recommend-content {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n\n    .slider-wrapper {\n      position: relative;\n      width: 100%;\n      height: 40vw;\n      background #eee\n      overflow: hidden;\n    }\n\n    .recommend-list {\n      position: relative;\n\n      .icon-huo {\n        float: left;\n        color: red;\n        font-size: $font-size-large;\n        height: 65px;\n        line-height: 65px;\n        margin-left: 20px;\n      }\n\n      .list-title {\n        height: 65px;\n        line-height: 65px;\n        padding-left: 40px;\n        font-size: $font-size-large;\n        color: $color-text-l;\n      }\n\n      ul {\n        padding: 0 10px;\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: space-between;\n\n        // background: darkseagreen;\n        .item {\n          width: calc(50% - 5px);\n          // background:mistyrose;\n          margin: 5px 0;\n\n          .icon {\n            position: relative;\n            width: 100%;\n            padding-top: 100%;\n\n            img {\n              position: absolute;\n              top: 0;\n              left: 0;\n              display: block;\n              width: 100%;\n              height: 100%;\n            }\n\n            .listenNum {\n              position: absolute;\n              bottom: 10px;\n              left: 5px;\n            }\n          }\n\n          .text {\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            line-height: 20px;\n            font-size: $font-size-medium;\n            margin-bottom: 10px;\n\n            .name {\n              margin-bottom: 0px;\n              color: $color-text-l;\n              // padding-right:10px;\n              ellipsis();\n            }\n\n            .desc {\n              color: $color-text-d;\n            }\n          }\n        }\n      }\n    }\n\n    .loading-container {\n      position: absolute;\n      width: 100%;\n      top: 50%;\n      transform: translateY(-50%);\n    }\n  }\n}\n\n.updateTip {\n  position: fixed;\n  display: none;\n  width: 100%;\n  height: 30px;\n  line-height: 30px;\n  text-align: center;\n  background: $color-theme;\n  top: 88px;\n  left: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/recommend/recommend.vue","import jsonp from '@/common/js/jsonp'\nimport {commonParams, options} from './config'\n\nexport default function getRcommend(){\n\n\tconst url = 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg'\n\t// 把公共参数和其他参数合并\n\tconst data = Object.assign( {}, commonParams, {\n\t\tg_tk: 1937468452,\n\t\tplatform: 'h5',\n\t\tuin: 0,\n\t\tneedNewCode: 1,\n\t\t_: 1512458339757\n\t})\n\treturn jsonp( url, data, options )\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/recommend.js","import axios from 'axios'\nimport jsonp from '@/common/js/jsonp'\nimport { commonParams, options } from './config'\n\nexport default function getDesList() {\n  // const url = '/api/getDesList'\n  const url = \"https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg\"\n  // 把公共参数和其他参数合并\n  const data = Object.assign({}, commonParams, {\n    // picmid:1,\n    // rnd:Math.random(),\n    // g_tk:5381,\n    // loginUin:0,\n    // hostUin:0,\n    // platform:'yqq',\n    // needNewCode:0,\n    // categoryId:99,\n    // sortId:5,\n    // sin:0,\n    // ein:29\n    g_tk: 5381,\n    platform: \"h5\",\n    needNewCode: 1,\n    _: 1515039362521\n  })\n  return jsonp(url, data, options)\n  // return axios.get( url, {\n  // \tparams: data\n  // } ).then( (res) => {\n  // \treturn Promise.resolve( res.data )\n  // } )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/deslist.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"recommend\",staticClass:\"recommend\"},[_c('scroll',{ref:\"scroll\",staticClass:\"recommend-content\",attrs:{\"data\":_vm.songsList,\"listen-scroll\":_vm.listenScroll,\"probe-type\":_vm.probeType},on:{\"scroll\":_vm._scroll}},[_c('div',{staticClass:\"wrapper\"},[(_vm.recommends.length)?_c('div',{staticClass:\"slider-wrapper\"},[_c('slider',{on:{\"sliderHeight\":_vm._sliderHeight}},_vm._l((_vm.recommends),function(item){return _c('div',[_c('a',{attrs:{\"href\":item.linkUrl}},[_c('img',{attrs:{\"src\":item.picUrl}})])])}))],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"recommend-list\"},[_c('i',{staticClass:\"icon-huo\"}),_vm._v(\" \"),_c('h1',{staticClass:\"list-title\"},[_vm._v(\"热门歌单\")]),_vm._v(\" \"),_c('ul',{staticClass:\"clearfix\"},_vm._l((_vm.songsList),function(item,index){return _c('li',{ref:\"listGroup\",refInFor:true,staticClass:\"item\",on:{\"click\":function($event){_vm.chooseItem(item)}}},[_c('div',{staticClass:\"icon\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.picUrl),expression:\"item.picUrl\"}],staticClass:\"needsclick\",attrs:{\"height\":\"100%\"}}),_vm._v(\" \"),_c('span',{staticClass:\"listenNum\"},[_vm._v(_vm._s(_vm._f(\"changeListenNum\")(item.accessnum)))])]),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_c('h2',{staticClass:\"name\",domProps:{\"innerHTML\":_vm._s(item.songListDesc)}}),_vm._v(\" \"),_c('p',{staticClass:\"desc\",domProps:{\"innerHTML\":_vm._s(item.songListAuthor)}})])])}))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songsList.length),expression:\"!songsList.length\"}],staticClass:\"loading-container\"},[_c('loading')],1)]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-6d3315de\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/recommend/recommend.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6d3315de\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./recommend.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./recommend.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./recommend.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6d3315de\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./recommend.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6d3315de\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/recommend/recommend.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}