webpackJsonp([1],{"0aAL":function(t,e,s){"use strict";e.a=function(t){return new n({id:t.Fsinger_mid,name:t.Fsinger_name,pic:"https://y.gtimg.cn/music/photo_new/T001R150x150M000"+t.Fsinger_mid+".jpg?max_age=2592000"})};var a=s("AA3o"),r=s.n(a),n=function t(e){var s=e.id,a=e.name;r()(this,t),this.id=s,this.name=a,this.pic="https://y.gtimg.cn/music/photo_new/T001R300x300M000"+s+".jpg?max_age=2592000"};e.b=n},GSpQ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("fdFc"),r=s("9rMa"),n={props:{placeholder:{type:String,default:"搜索歌手、歌曲，搜索结果上拉可以加载更多"}},data:function(){return{searchTxt:""}},methods:{clearTXT:function(){this.searchTxt=""},setTXT:function(t){this.searchTxt=t},_blur:function(){this.$refs.input.blur()}},created:function(){var t=this;this.$watch("searchTxt",Object(a.b)(function(e,s){t.$emit("onTXTchange",e)},300))}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-wrapper"},[s("i",{staticClass:"icon-search"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTxt,expression:"searchTxt"}],ref:"input",staticClass:"box",attrs:{placeholder:t.placeholder},domProps:{value:t.searchTxt},on:{input:function(e){e.target.composing||(t.searchTxt=e.target.value)}}}),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.searchTxt,expression:"searchTxt"}],staticClass:"icon-dismiss",on:{click:function(e){t.clearTXT()}}})])},staticRenderFns:[]};var o=s("vSla")(n,i,!1,function(t){s("iozd")},"data-v-172f63e6",null).exports,c=s("lC5x"),l=s.n(c),u=s("J0Oq"),h=s.n(u),d=s("4YfN"),p=s.n(d),f=s("aA9S"),v=s.n(f),m=s("Gak4"),_=s("T452");function g(t,e,s,a){var r=v()({},_.b,{w:t,catZhida:s?1:0,p:e,perpage:a,n:a,g_tk:5381,platform:"h5",needNewCode:1,zhidaqu:1,t:0,flag:1,ie:"utf-8",sem:1,aggr:0,remoteplace:"txt.mqq.all",format:"jsonp"});return Object(m.a)("https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp",r,_.c)}var w=s("PvFA"),T=s("bh5B"),x=s("qqiS"),b=s("fFlX"),S=s("0aAL"),y={props:{searchTxt:{type:String,default:""},showSinger:{type:Boolean,default:!0}},data:function(){return{page:1,result:[],pullUpLoad:!0,beforeScrollStart:!0,loadMore:!0,title:""}},methods:p()({_search:function(){var t=this;this.loadMore=!0,this.page=1,this.$refs.result._scrollTo(0,0,500),g(this.searchTxt,this.page,this.showSinger,20).then(function(e){e.code===_.a&&(t.result=t._sortResult(e.data),console.log(t.result),t.check_loadMore(e.data.song))})},_pullUpLoad:function(){var t=this;return h()(l.a.mark(function e(){var s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loadMore){e.next=2;break}return e.abrupt("return");case 2:return t.page++,e.next=5,g(t.searchTxt,t.page,t.showSinger,20);case 5:(s=e.sent).code===_.a&&(t.result[0].singerid?t.result=t.result.concat(t._sortResult(s.data).slice(1)):t.result=t.result.concat(t._sortResult(s.data)),t.check_loadMore(s.data.song));case 7:case"end":return e.stop()}},e,t)}))()},check_loadMore:function(t){(!t.list.length||20*t.curpage+t.curnum>t.totalnum)&&(this.loadMore=!1)},_sortResult:function(t){var e=[];return t.zhida&&t.zhida.singerid&&e.push(p()({},t.zhida,{type:"singer"})),t.song&&(e=e.concat(this._createSongs(t.song.list))),e},_createSongs:function(t){var e=[];return t.forEach(function(t){t.songid&&t.albummid&&e.push(Object(w.a)(t))}),e},showWhichIcon:function(t){return"singer"===t.type?"icon-icon":"icon-play"},showName:function(t){return"singer"===t.type?t.singername:t.name+"——"+t.singer},selectItem:function(t){if("singer"===t.type){var e=new S.b({id:t.singermid,name:t.singername});this.$router.push({path:"/search/"+e.id}),this.setSinger(e)}else this.searchToPlay(t);this.setHistroy(t)}},Object(r.d)({setSinger:"SET_SINGER",setHistroy:"SET_SEARCH_HISTORY"}),Object(r.b)(["searchToPlay"]),{_beforeScroll:function(){this.$emit("_beforeScroll")},adaptBottom:function(t){var e=this.playList.length>0?"60px":"";this.$refs.wrapper.style.bottom=e,this.$refs.result._refresh()}}),watch:{searchTxt:function(){this._search()}},components:{Scroll:T.a,Loading:x.a,CanNotFind:b.default}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"wrapper",staticClass:"wrapper"},[s("scroll",{ref:"result",staticClass:"result",attrs:{data:t.result,pullUpLoad:t.pullUpLoad,beforeScrollStart:t.beforeScrollStart},on:{pullUpLoad:t._pullUpLoad,beforeScroll:t._beforeScroll}},[s("ul",{staticClass:"result-list"},[t._l(t.result,function(e){return s("li",{staticClass:"result-item",on:{click:function(s){t.selectItem(e)}}},[s("div",{staticClass:"icon"},[s("i",{class:t.showWhichIcon(e)})]),t._v(" "),s("div",{staticClass:"name"},[s("p",{staticClass:"text",class:{hightLight:"singer"===e.type},domProps:{innerHTML:t._s(t.showName(e))}})])])}),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.loadMore,expression:"loadMore"}],attrs:{title:t.title}})],2),t._v(" "),s("div",{staticClass:"cannotfind-wrapper"},[s("can-not-find",{directives:[{name:"show",rawName:"v-show",value:!t.loadMore&&!t.result.length,expression:"!loadMore && !result.length"}]})],1)])],1)},staticRenderFns:[]};var k={name:"Search",components:{SInput:o,Result:s("vSla")(y,C,!1,function(t){s("JOkw")},"data-v-306b6d42",null).exports},data:function(){return{hotKey:[],searchTxt:""}},created:function(){this._getHotKey()},methods:{_getHotKey:function(){var t,e=this;(t=v()({},_.b,{g_tk:5381,platform:"h5",needNewCode:1,_:1513243875804}),Object(m.a)("https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg",t,_.c)).then(function(t){e.hotKey=t.data.hotkey.slice(0,20),e.hotKey.unshift({k:t.data.special_key,url:t.data.special_url})})},selectItem:function(t,e){0===e?(window.location.href=this.hotKey[0].url,this.$refs.sinput.setTXT("")):this.$refs.sinput.setTXT(t)},onTXTchange:function(t){this.searchTxt=t},_beforeScroll:function(){this.$refs.sinput._blur()}}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-box-wrapper"},[s("s-input",{ref:"sinput",on:{onTXTchange:t.onTXTchange}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchTxt,expression:"!searchTxt"}],staticClass:"hotkey-wrapper"},[s("div",{staticClass:"shortcut"},[s("div",{staticClass:"hotkey"},[s("i",{staticClass:"icon-huo"}),t._v(" "),s("h1",{staticClass:"title"},[t._v("热门搜索")]),t._v(" "),s("ul",t._l(t.hotKey,function(e,a){return s("li",{staticClass:"item",class:{hightLight:0===a},on:{click:function(s){t.selectItem(e.k,a)}}},[t._v(t._s(e.k))])}))])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.searchTxt,expression:"searchTxt"}],staticClass:"search-result"},[s("result",{attrs:{searchTxt:t.searchTxt},on:{_beforeScroll:t._beforeScroll}})],1),t._v(" "),s("router-view")],1)},staticRenderFns:[]};var $=s("vSla")(k,M,!1,function(t){s("U6WA")},"data-v-14c716e6",null);e.default=$.exports},JOkw:function(t,e){},U6WA:function(t,e){},V4aQ:function(t,e){},fFlX:function(t,e,s){"use strict";var a=s("V4aQ"),r=s.n(a),n=s("ow+V");var i=function(t){s("vsv0")},o=s("vSla")(r.a,n.a,!1,i,"data-v-e2d10972",null);e.default=o.exports},iozd:function(t,e){},"ow+V":function(t,e,s){"use strict";var a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"desc-wrapper"},[e("p",{staticClass:"desc"},[this._v("“找不到您想要的，请尝试其他关键词”")])])}]};e.a=a},vsv0:function(t,e){}});
//# sourceMappingURL=1.46a12f01cb083e5e1991.js.map