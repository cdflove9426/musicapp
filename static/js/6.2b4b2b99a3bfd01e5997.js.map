{"version":3,"sources":["webpack:///./src/common/js/singer.js","webpack:///./src/common/js/dom.js","webpack:///src/views/singer/singer.vue","webpack:///./src/api/singerList.js","webpack:///./src/views/singer/singer.vue?9010","webpack:///./src/views/singer/singer.vue"],"names":["item","Singer","id","Fsinger_mid","name","Fsinger_name","pic","_ref","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","this","hasClass","el","className","RegExp","test","newClass","split","push","join","val","setAttribute","getAttribute","window","SVGElement","rect","getBoundingClientRect","top","left","width","height","offsetTop","offsetLeft","offsetWidth","offsetHeight","singer_singer","data","singerList","listenScroll","scrollY","currentIndex","listHeight","probeType","gap","touch","showShortcutLight","computed","shortcutList","map","group","tag","substr","fixedTitle","showHot","created","_getSingerList","methods","extends_default","_this","assign_default","config","channel","page","key","pagesize","pagenum","loginUin","hostUin","g_tk","platform","needNewCode","format","Object","jsonp","then","res","code","_sortSingerList","list","catch","err","console","log","hot","items","forEach","index","singer","k","Findex","oth","con","match","sort","a","b","charCodeAt","concat","onTouchStart","e","anchorIndex","dom","target","anchorRect","y1","touches","pageY","t1","parseInt","_scrollTo","$refs","shortcutDot","style","background","shortcutLight","transform","display","onTouchMove","y2","delta_length","delta","onTouchend","length","scroll","_scrollToElement","listGroup","_scroll","pos","y","_caculateHeight","i","clientHeight","selectSinger","setSinger","$router","path","vuex_esm","adaptBottom","playList","bottom","_refresh","watch","_this2","setTimeout","oldVal","_heights","preHeight","nextHeight","fixedTop","components","Scroll","scroll_scroll","Loading","loading","views_singer_singer","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","on","_l","refInFor","_e","_v","_s","click","$event","directives","rawName","value","expression","touchstart","stopPropagation","preventDefault","touchmove","touchend","class","current","data-index","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.2b4b2b99a3bfd01e5997.js","sourcesContent":["export default class Singer {\n\tconstructor({id, name}){\n\t\tthis.id = id\n\t\tthis.name = name\n\t\tthis.pic = `https://y.gtimg.cn/music/photo_new/T001R300x300M000${id}.jpg?max_age=2592000`\n\t}\n}\n\n// 不用在sort歌手数据结构时每次调用new\nexport function createSinger(item){\n\treturn new Singer({\n\t\tid: item.Fsinger_mid,\n\t\tname: item.Fsinger_name,\n\t\tpic: `https://y.gtimg.cn/music/photo_new/T001R150x150M000${item.Fsinger_mid}.jpg?max_age=2592000`\n\t})\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/singer.js","export function hasClass(el, className) {\n  let reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)')\n  return reg.test(el.className)\n}\n\nexport function addClass(el, className) {\n  if (hasClass(el, className)) {\n    return\n  }\n\n  let newClass = el.className.split(' ')\n  newClass.push(className)\n  el.className = newClass.join(' ')\n}\n\nexport function removeClass(el, className) {\n  if (!hasClass(el, className)) {\n    return\n  }\n\n  let reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)', 'g')\n  el.className = el.className.replace(reg, ' ')\n}\n\nexport function attrData(el, name, val) {\n  let prefix = 'data-'\n  if (val) {\n    return el.setAttribute(prefix + name, val)\n  }\n  return el.getAttribute(prefix + name)\n}\n\nexport function getRect(el) {\n  if (el instanceof window.SVGElement) {\n    let rect = el.getBoundingClientRect()\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    }\n  } else {\n    return {\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/dom.js","<template>\n  <div class=\"singer\" ref=\"singer\">\n    <scroll class=\"singer-list\" :data=\"singerList\" :listenScroll=\"listenScroll\" :probeType=\"probeType\" @scroll=\"_scroll\" ref=\"scroll\">\n      <ul>\n        <li v-for=\"group,index in singerList\" class=\"list-group\" ref=\"listGroup\">\n          <i class=\"icon-huo\" v-if=\"showHot && index===0\"></i>\n          <h2 class=\"list-group-title\">{{group.tag}}</h2>\n          <ul>\n            <li @click=\"selectSinger(item,index)\" v-for=\"(item,index) in group.items\" class=\"list-group-item\">\n              <img class=\"pic\" v-lazy=\"item.pic\">\n              <span class=\"name\">{{item.name}}</span>\n            </li>\n          </ul>\n        </li>\n      </ul>\n      <!-- 右侧快速入口 -->\n      <div class=\"list-shortcut\" @touchstart.stop.prevent=\"onTouchStart\" @touchmove.stop.prevent=\"onTouchMove\" @touchend=\"onTouchend\" v-show=\"singerList.length\">\n        <span class=\"shortcutDot\" ref=\"shortcutDot\"></span>\n        <div class=\"shortcutLight\" ref=\"shortcutLight\" v-show=\"showShortcutLight\">{{fixedTitle}}</div>\n        <ul>\n          <li v-for=\"(item, index) in shortcutList\" :data-index=\"index\" class=\"item\" :class=\"{'current':currentIndex===index}\">{{item}}\n          </li>\n\n        </ul>\n      </div>\n      <div class=\"list-fixed\" v-show=\"fixedTitle\" ref=\"fixedTitle\">\n        <i class=\"icon-huo\" v-if=\"showHot\"></i>\n        <h1 class=\"fixed-title\">{{fixedTitle}}</h1>\n      </div>\n      <div class=\"loading-container\" v-show=\"!singerList.length\">\n        <loading></loading>\n      </div>\n      <!-- 子路由（歌手详情页） -->\n      <router-view></router-view>\n    </scroll>\n  </div>\n</template>\n\n<script>\nimport { createSinger } from '@/common/js/singer'\nimport Scroll from '@/components/scroll/scroll'\nimport getSingerList from '@/api/singerList'\nimport Loading from '@/components/loading/loading'\nimport { ERR_OK } from '@/api/config'\nimport { attrData ,getRect} from '@/common/js/dom'\nimport {mapMutations} from 'vuex'\n// import {adaptBottomMixin} from '@/common/js/mixins'\nconst HOT_NAME = '热门'\nconst HOT_SINGER_NUM = 10\nconst FIXED_HEIGHT = 30\nconst TITLE_HEIGHT = 40\nconst ANCHOR_HEIGHT = 18\nconst color_theme_d = \"rgb(230,230,230)\"\nconst color_sub_theme = \"#F5CD19\"\nexport default {\n  // mixins: [adaptBottomMixin],\n  data() {\n    return {\n      singerList: [],\n      listenScroll: true,\n      scrollY: -1,\n      currentIndex: 0,\n      listHeight: [],\n      probeType: 3,\n      gap: -1,\n      touch: {},\n      showShortcutLight:false\n    }\n  },\n  computed: {\n    shortcutList() {\n      return this.singerList.map((group) => {\n        return group.tag.substr(0, 1)\n      })\n    },\n    fixedTitle() {\n      if (this.scrollY > 0) {\n        return ''\n      }\n      return this.singerList[this.currentIndex] ? this.singerList[this.currentIndex].tag : ''\n    },\n    showHot() {\n      return this.scrollY > 0 || this.fixedTitle === HOT_NAME\n    }\n  },\n  created() {\n    // this.touch = {}\n    this._getSingerList()\n  },\n  methods: {\n    _getSingerList() {\n      getSingerList().then((res) => {\n        if (res.code === ERR_OK) {\n          // console.log(res)\n          this.singerList = this._sortSingerList(res.data.list)\n          // console.log(\"this.singerList\");\n          // console.log(this.singerList);\n        }\n      }).catch((err) => {\n        console.log(err)\n      })\n    },\n    // 数据结构 优化\n    _sortSingerList(list) {\n      let map = {\n        hot: {\n          tag: HOT_NAME,\n          items: []\n        }\n      }\n      list.forEach((item, index) => {\n        // 如果index<10,以hot为key放进hot\n        if (index < HOT_SINGER_NUM) {\n          //把singer抽象成类\n          map.hot.items.push(createSinger(item))\n        }\n        // 其余的以a-z为key放进a-z\n        let k = item.Findex\n        if (!map[k]) {\n          map[k] = {\n            tag: k,\n            items: []\n          }\n        }\n        map[k].items.push(createSinger(item))\n      })\n\n      // 为了使map按照一定顺序排序，这里进行处理\n      let hot = [],\n        oth = []\n      for (let key in map) {\n        let con = map[key]\n        if (con.tag.match(/[a-zA-Z]/)) {\n          oth.push(con)\n        } else if (con.tag === HOT_NAME) {\n          hot.push(con)\n        }\n      }\n      oth.sort((a, b) => {\n        return a.tag.charCodeAt(0) - b.tag.charCodeAt(0)\n      })\n      return hot.concat(oth)\n    },\n    onTouchStart(e) {\n      let anchorIndex = attrData(e.target, 'index')\n      let anchorRect = getRect(e.target)\n\n      this.touch.y1 = e.touches[0].pageY\n      let t1 = anchorRect.top\n\n      this.touch.anchorIndex = parseInt(anchorIndex)\n\n      this._scrollTo(anchorIndex)\n\n      this.$refs.shortcutDot.style.background = color_sub_theme\n      this.$refs.shortcutLight.style.top =  t1 -25+\"px\";\n      this.$refs.shortcutLight.style.transform = `translate3d(0, 0, 0)`\n      // this.showShortcutLight = true;\n      this.$refs.shortcutLight.style.display = 'block'\n\n      // alert(this.$refs.shortcutLight.style.display)\n    },\n    onTouchMove(e) {\n      this.touch.y2 = e.touches[0].pageY\n      let  delta_length = this.touch.y2 - this.touch.y1;\n      let delta =  delta_length/ ANCHOR_HEIGHT | 0\n      let anchorIndex = parseInt(this.touch.anchorIndex) + delta  //通过attrData（）获取的属性值为字符串\n       this.$refs.shortcutLight.style.transform = `translate3d(0, ${delta_length}px, 0)`\n      this._scrollTo(anchorIndex)\n    },\n    onTouchend() {\n\n      this.$refs.shortcutDot.style.background = color_theme_d\n      this.$refs.shortcutLight.style.display = 'none'\n\n\n    },\n    _scrollTo(index) {\n      if (!index && index !== 0) {\n        return\n      }\n      if (index < 0) {\n        index = 0\n      } else if (index > this.listHeight.length - 2) {\n        index = this.listHeight.length - 2\n      }\n      this.scrollY = -this.listHeight[index]\n      this.$refs.scroll._scrollToElement(this.$refs.listGroup[index], 0)\n    },\n    // scroll组件触发scroll事件\n    _scroll(pos) {\n      this.scrollY = pos.y\n    },\n    // 计算高度\n    _caculateHeight() {\n      let listGroup = this.$refs.listGroup,\n        height = 0\n      this.listHeight.push(height)\n      for (let i = 0; i < listGroup.length; i++) {\n        let list = listGroup[i]\n        // console.log(list);\n        height += list.clientHeight\n        this.listHeight.push(height)\n      }\n    },\n    // 点击歌手跳转至歌手详情页\n    selectSinger(item, index) {\n      console.log('selectSinger');\n      this.setSinger(item)  //相当于提交了mutation\n      this.$router.push({\n        path: `/singer/${item.id}`\n      })\n\n    },\n    ...mapMutations({\n    \tsetSinger: 'SET_SINGER'\n    }),\n    // 重写mixins方法\n    adaptBottom(playList) {\n      const bottom = this.playList.length > 0 ? '40px' : ''\n      this.$refs.singer.style.bottom = bottom\n      this.$refs.scroll._refresh()\n    }\n\n  },\n  watch: {\n    singerList() {  //数据的变化到DOM的变化有延迟\n      setTimeout(() => {\n        this._caculateHeight()\n      }, 20);\n    },\n    scrollY(val, oldVal) {\n\n      const _heights = this.listHeight\n      // 当滚动到顶部\n      if (val > 0) {\n        this.currentIndex = 0\n        return\n      }\n      // 正常在中间滚动时\n      for (let i = 0; i < _heights.length - 1; i++) {\n        let preHeight = _heights[i],\n          nextHeight = _heights[i + 1]\n        if (-val >= preHeight && -val < nextHeight) { //向上滚动时val为负\n          this.currentIndex = i\n          //console.log(this.currentIndex)\n          this.gap = nextHeight + val  //为gap赋值\n          //console.log(this.gap, nextHeight, val)\n          return\n        }\n      }\n      // 当滚动到底部，且-val大于最后一个元素的上限\n      this.currentIndex = _heights.length - 2\n    },\n    // 设置标签悬顶\n    gap(val, oldVal) {\n      let fixedTop = (val > 0 && val < FIXED_HEIGHT) ? val - FIXED_HEIGHT : 0\n      this.$refs.fixedTitle.style.transform = `translate3d(0, ${fixedTop}px, 0)` //开启硬件加速\n    }\n  },\n  components: {\n    Scroll,\n    Loading\n  }\n}\n</script>\n\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\n@import \"~styles/variable\"\n@import \"~styles/mixin\"\n.singer\n  position: absolute\n  top: 88px\n  bottom: 0\n  width: 100%\n  .singer-list\n    position: relative\n    width: 100%\n    height: 100%\n    overflow: hidden\n    background: $color-background\n    .list-group\n      padding-bottom: 30px\n      .icon-huo\n        float:left\n        color:red\n        margin: 6px 6px 0 6px\n      .list-group-title\n        height: 30px\n        line-height: 30px\n        padding-left: 20px\n        font-size: $font-size-small\n        color: $color-text-l\n        background: $color-highlight-background\n      .list-group-item\n        display: flex\n        align-items: center\n        padding: 20px 0 0 30px\n        .pic\n          width: 50px\n          height: 50px\n          border-radius: 50%\n        .name\n          margin-left: 20px\n          color: $color-text-l\n          font-size: $font-size-medium\n          no-wrap()\n          width: 240px\n    .list-shortcut\n      position: absolute\n      // z-index: 10\n      right: 0\n      top: 50%\n      transform: translateY(-50%)\n      width: 20px\n      padding: 10px 0 20px\n      border-radius: 10px\n      text-align: center\n      background: $color-background-d\n      font-family: Helvetica\n      .shortcutDot\n        display: inline-block\n        width: 12px\n        height: 12px\n        border-radius: 50%\n        background: $color-background\n      .shortcutLight\n        position: absolute\n        right: 30px\n        top: 0\n        background: $color-theme-d\n        width: 60px\n        height: 60px\n        border-radius: 50%\n        text-align: center\n        line-height: 60px\n        display: none\n      .item\n        padding: 3px\n        line-height: 1\n        color: $color-text-l\n        font-size: $font-size-small\n        &.current\n          color: $color-theme\n    .list-fixed\n      position: absolute\n      top: 0\n      left: 0\n      width: 100%\n      .icon-huo\n        float:left\n        color:red\n        margin: 6px 6px 0 6px\n      .fixed-title\n        height: 30px\n        line-height: 30px\n        padding-left: 20px\n        font-size: $font-size-small\n        color: $color-text-l\n        background: $color-highlight-background\n    .loading-container\n        position: absolute\n        width: 100%\n        top: 50%\n        transform: translateY(-50%)\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/singer/singer.vue","import jsonp from '@/common/js/jsonp'\nimport {commonParams, options} from './config'\n\nexport default function getSingerList(){\n\n\tconst url = 'https://c.y.qq.com/v8/fcg-bin/v8.fcg'\n\t// 把公共参数和其他参数合并\n\tconst data = Object.assign( {}, commonParams, {\n\t\tchannel: 'singer',\n\t\tpage: 'list',\n\t\tkey: 'eu_team_all',\n\t\tpagesize: 100,\n\t\tpagenum: 1,\n\t\tloginUin: 0,\n\t\thostUin: 0,\n\t\tg_tk: 450152082,\n\t\tplatform: 'yqq',\n\t\tneedNewCode: 0,\n\t\tformat: 'jsonp'\n\t})\n\treturn jsonp( url, data, options )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/singerList.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"singer\",staticClass:\"singer\"},[_c('scroll',{ref:\"scroll\",staticClass:\"singer-list\",attrs:{\"data\":_vm.singerList,\"listenScroll\":_vm.listenScroll,\"probeType\":_vm.probeType},on:{\"scroll\":_vm._scroll}},[_c('ul',_vm._l((_vm.singerList),function(group,index){return _c('li',{ref:\"listGroup\",refInFor:true,staticClass:\"list-group\"},[(_vm.showHot && index===0)?_c('i',{staticClass:\"icon-huo\"}):_vm._e(),_vm._v(\" \"),_c('h2',{staticClass:\"list-group-title\"},[_vm._v(_vm._s(group.tag))]),_vm._v(\" \"),_c('ul',_vm._l((group.items),function(item,index){return _c('li',{staticClass:\"list-group-item\",on:{\"click\":function($event){_vm.selectSinger(item,index)}}},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(item.pic),expression:\"item.pic\"}],staticClass:\"pic\"}),_vm._v(\" \"),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))])])}))])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.singerList.length),expression:\"singerList.length\"}],staticClass:\"list-shortcut\",on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onTouchStart($event)},\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.onTouchMove($event)},\"touchend\":_vm.onTouchend}},[_c('span',{ref:\"shortcutDot\",staticClass:\"shortcutDot\"}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showShortcutLight),expression:\"showShortcutLight\"}],ref:\"shortcutLight\",staticClass:\"shortcutLight\"},[_vm._v(_vm._s(_vm.fixedTitle))]),_vm._v(\" \"),_c('ul',_vm._l((_vm.shortcutList),function(item,index){return _c('li',{staticClass:\"item\",class:{'current':_vm.currentIndex===index},attrs:{\"data-index\":index}},[_vm._v(_vm._s(item)+\"\\n        \")])}))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fixedTitle),expression:\"fixedTitle\"}],ref:\"fixedTitle\",staticClass:\"list-fixed\"},[(_vm.showHot)?_c('i',{staticClass:\"icon-huo\"}):_vm._e(),_vm._v(\" \"),_c('h1',{staticClass:\"fixed-title\"},[_vm._v(_vm._s(_vm.fixedTitle))])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.singerList.length),expression:\"!singerList.length\"}],staticClass:\"loading-container\"},[_c('loading')],1),_vm._v(\" \"),_c('router-view')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-d3cfed18\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/views/singer/singer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d3cfed18\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./singer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./singer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./singer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d3cfed18\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./singer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d3cfed18\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/singer/singer.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}